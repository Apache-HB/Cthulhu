import link:intrin -> ld
import ctu:intrin -> cc


let ldscript: ld:script := {
        entry := kmain,

        vma := 0xFFFFFFFF80100000ULL,

        sections := [
            ld:section("stivalehdr")
                .data(header)
                .align(4096),

            ld:section("text")
                .data(cc:section("text"))
                .align(4096),

            ld:section("rodata")
                .data(cc:section("rodata"))
                .align(4096),

            ld:section("data")
                .data(cc:section("data"))
                .align(4096),

            ld:section("bss")
                .data([ cc:section("bss"), cc:section("COMMON") ])
                .align(4096)
        ]
    }
}